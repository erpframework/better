<!DOCTYPE html>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.better.js"></script>

<style type="text/css">
	.wrapper {
		border: 1px solid #ccc;
		width: 80%;
		padding : 20px;
		margin : 10px;
	} 
	#tableToExport {
		background-color : #eee;
		margin : 0px;
		width : 80%;
	}
	#tableToExport thead tr {
		background-color: #cce;
	}
	#tableToExport th {
		padding: 4px 20px;
		margin : 0px;
	}
	#tableToExport td {
		padding: 2px 20px;
		margin : 0px;
	}

	.panel {
		width:100px;
		height:50px;
		border : 1px solid black;
	}

	input {
		margin-top:5px;
	}
</style>


<script type="text/javascript">

$(function(){


	$.better();
	$.better.test();
	$.better.defaults.downloadUrl = 'bouncefile.php';
	// $.better.defaults.downloadMethod = 'console';

	$("#downloadTable").click(function(){
		$("#tableToExport").better('download', {filename:'table.csv'});
	});

	$("#downloadText").click(function(){
		$.better.download({
			  data : $("#textarea").text()
			, filename : 'text.txt'
			, type : 'text/plain'
		});
	});
	// $("#tableToExport").download({filename:'data.csv'});
	// $("#tableToExport").test();
	
	// by default:
	// $.better.defaults.panel.returnPanel = false;
	
	$("#wrapper").better('panel', {
		  stick : 'top right'
		, pivot : 'middle right'
		// , offset : '0 -25'
	});//.css('background-color', 'green');
	$("#tableToExport thead").better('panel', {
		  stick : 'top right'
		, pivot : 'top right'
		, offset : '0 0'
		, height : 'inherit'
	});//.css('background-color', 'green');
	var $s = $("#fieldname").better('panel', {
		  stick : 'top left'
		, pivot : 'top left'
		, offset : '0 0'
		, height : 'inherit'
		, panel : $("<div />", {style: 'width:25px;height:10px;background-color:red;overflow:auto'})
	});//.css('background-color', 'green');

	$s.text('abcdefg');
	$s.css({width:'auto'});
	$.better.plugins.panels.recalc();

});

</script>

<h2>Some header</h2>
<p>some text...</p>
<div class='elements wrapper' id='wrapper'>
<table id='tableToExport'>
	<thead>
	<tr>
		<th id='fieldname'>Name</th>
		<th>Age</th>
		<th>Qualified</th>
	</tr>
	</thead>
	<tr>
		<td>Vasya</td>
		<td>18</td>
		<td>Yes</td>
	</tr>
	<tr>
		<td>Petya</td>
		<td>25</td>
		<td>No</td>
	</tr>
	<tr style='display:none'>
		<td>Nastya</td>
		<td>39</td>
		<td>No</td>
	</tr>
</table>
<input type="button" id="downloadTable" value="Download this table as table.csv" />
</div>

<div class='elements wrapper'>
	<textarea id='textarea' cols="50" rows="5">
Some
multiline
text
	</textarea><br />
<input type="button" id="downloadText" value="Download this text as text.txt" />
</div>


